{"ast":null,"code":"import _toConsumableArray from\"C:/Users/acer/Desktop/Movie Box/Movies-Box/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/acer/Desktop/Movie Box/Movies-Box/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/acer/Desktop/Movie Box/Movies-Box/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/acer/Desktop/Movie Box/Movies-Box/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/acer/Desktop/Movie Box/Movies-Box/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/acer/Desktop/Movie Box/Movies-Box/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\acer\\\\Desktop\\\\Movie Box\\\\Movies-Box\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{Component}from'react';// import { movies } from './getMovies'\nimport axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Movies=/*#__PURE__*/function(_Component){_inherits(Movies,_Component);var _super=_createSuper(Movies);function Movies(){var _this;_classCallCheck(this,Movies);_this=_super.call(this);_this.changeMovies=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"changemovies called\");console.log(_this.state.currPage);_context.next=4;return axios.get(\"https://api.themoviedb.org/3/movie/popular?api_key=5540e483a20e0b20354dabc2d66a31c9&language=en-US&page=\".concat(_this.state.currPage));case 4:res=_context.sent;data=res.data;// console.log(data);\n_this.setState({movies:_toConsumableArray(data.results)});case 7:case\"end\":return _context.stop();}}},_callee);}));_this.handleRight=function(){var temparr=[];for(var i=1;i<=_this.state.parr.length+1;i++){temparr.push(i);}_this.setState({parr:[].concat(temparr),currPage:_this.state.currPage+1},_this.changeMovies);};_this.handleLeft=function(){if(_this.state.currPage!=1){_this.setState({currPage:_this.state.currPage-1},_this.changeMovies);}};_this.handleClick=function(value){if(value!=_this.state.currPage){console.log(\"i am called\");_this.setState({currPage:value},_this.changeMovies);}};_this.handleFavorites=function(movie){var oldData=JSON.parse(localStorage.getItem(\"movie2\")||\"[]\");if(_this.state.favorites.includes(movie.id)){oldData=oldData.filter(function(m){return m.id!=movie.id;});}else{oldData.push(movie);}localStorage.setItem(\"movie2\",JSON.stringify(oldData));console.log(oldData);_this.handleFavoritesState();};_this.handleFavoritesState=function(){var oldData=JSON.parse(localStorage.getItem(\"movie2\")||\"[]\");var temp=oldData.map(function(movie){return movie.id;});_this.setState({favorites:_toConsumableArray(temp)});};_this.state={hover:'',parr:[1],currPage:1,movies:[],favorites:[]};return _this;}_createClass(Movies,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"https://api.themoviedb.org/3/movie/popular?api_key=5540e483a20e0b20354dabc2d66a31c9&language=en-US&page=\".concat(this.state.currPage));case 2:res=_context2.sent;data=res.data;// console.log(data);\n// console.log('mounting');\nthis.setState({movies:_toConsumableArray(data.results)});// let callbackfn = (entries) => {\n//     if (entries[0].isIntersecting) {\n//         this.loadMoreMovies();\n//     }\nthis.handleFavoritesState();case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;// let movie = movies.results\n// console.log('render');\nreturn/*#__PURE__*/_jsx(_Fragment,{children:this.state.movies.length==0?/*#__PURE__*/_jsx(\"div\",{class:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{class:\"visually-hidden\",children:\"Loading...\"})}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",style:{color:'white'},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Trending\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"movies-list\",children:this.state.movies.map(function(movieObj){return/*#__PURE__*/_jsxs(\"div\",{className:\"card movies-card\",onMouseEnter:function onMouseEnter(){return _this2.setState({hover:movieObj.id});},onMouseLeave:function onMouseLeave(){return _this2.setState({hover:''});},children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://image.tmdb.org/t/p/original\".concat(movieObj.backdrop_path),alt:movieObj.title,className:\"card-img-top movies-img\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"card-title movies-title\",children:movieObj.original_title}),/*#__PURE__*/_jsx(\"div\",{className:\"button-wrapper \",style:{display:'flex',width:'100',justifyContent:'center '},children:_this2.state.hover==movieObj.id&&/*#__PURE__*/_jsx(\"a\",{className:\"btn btn-primary movies-button\",style:{border:'none'},onClick:function onClick(){return _this2.handleFavorites(movieObj);},children:_this2.state.favorites.includes(movieObj.id)?\"Remove from favorites\":\"Add to favorites\"})})]});})}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center'},children:/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"Page navigation example\",children:/*#__PURE__*/_jsxs(\"ul\",{class:\"pagination\",children:[/*#__PURE__*/_jsx(\"li\",{class:\"page-item\",children:/*#__PURE__*/_jsx(\"a\",{class:\"page-link\",onClick:this.handleLeft,children:\"Previous\"})}),this.state.parr.map(function(value){return/*#__PURE__*/_jsx(\"li\",{class:\"page-item\",children:/*#__PURE__*/_jsx(\"a\",{class:\"page-link\",onClick:function onClick(){return _this2.handleClick(value);},children:value})});}),/*#__PURE__*/_jsx(\"li\",{class:\"page-item\",children:/*#__PURE__*/_jsx(\"a\",{class:\"page-link\",onClick:this.handleRight,children:\"Next\"})})]})})})]})});}}]);return Movies;}(Component);export{Movies as default};","map":{"version":3,"sources":["C:/Users/acer/Desktop/Movie Box/Movies-Box/src/Component/Movies.js"],"names":["React","Component","axios","Movies","changeMovies","console","log","state","currPage","get","res","data","setState","movies","results","handleRight","temparr","i","parr","length","push","handleLeft","handleClick","value","handleFavorites","movie","oldData","JSON","parse","localStorage","getItem","favorites","includes","id","filter","m","setItem","stringify","handleFavoritesState","temp","map","hover","color","movieObj","backdrop_path","title","original_title","display","width","justifyContent","border"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\n// import { movies } from './getMovies'\r\nimport axios from 'axios';\r\n\r\nexport default class Movies extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            hover: '',\r\n            parr: [1],\r\n            currPage: 1,\r\n            movies: [],\r\n            favorites : []\r\n        }\r\n    }\r\n    async componentDidMount() {\r\n        //Side effects \r\n        const res = await axios.get(`https://api.themoviedb.org/3/movie/popular?api_key=5540e483a20e0b20354dabc2d66a31c9&language=en-US&page=${this.state.currPage}`);\r\n        let data = res.data\r\n        // console.log(data);\r\n        // console.log('mounting');\r\n\r\n        this.setState({\r\n            movies: [...data.results]\r\n        })\r\n        // let callbackfn = (entries) => {\r\n        //     if (entries[0].isIntersecting) {\r\n        //         this.loadMoreMovies();\r\n        //     }\r\n        this.handleFavoritesState();\r\n    }\r\n    changeMovies = async () => {\r\n        console.log(\"changemovies called\");\r\n        console.log(this.state.currPage);\r\n        const res = await axios.get(`https://api.themoviedb.org/3/movie/popular?api_key=5540e483a20e0b20354dabc2d66a31c9&language=en-US&page=${this.state.currPage}`);\r\n        let data = res.data\r\n        // console.log(data);\r\n        this.setState({\r\n            movies: [...data.results]\r\n        })\r\n    }\r\n    handleRight = () => {\r\n        let temparr = []\r\n        for (let i = 1; i <= this.state.parr.length + 1; i++) {\r\n            temparr.push(i);\r\n        }\r\n        this.setState({\r\n            parr: [...temparr],\r\n            currPage: this.state.currPage + 1\r\n        }, this.changeMovies)\r\n    }\r\n\r\n    handleLeft = () => {\r\n        if (this.state.currPage != 1) {\r\n            this.setState({\r\n                currPage: this.state.currPage - 1\r\n            }, this.changeMovies)\r\n        }\r\n    }\r\n\r\n    handleClick = (value) => {\r\n        if (value != this.state.currPage) {\r\n            console.log(\"i am called\")\r\n            this.setState({\r\n                currPage: value\r\n            }, this.changeMovies)\r\n        }\r\n    }\r\n    handleFavorites = (movie) => {\r\n        let oldData = JSON.parse(localStorage.getItem(\"movie2\") || \"[]\")\r\n        if (this.state.favorites.includes(movie.id)) {\r\n            oldData = oldData.filter((m) => m.id != movie.id)\r\n        } else {\r\n            oldData.push(movie)\r\n        }\r\n        localStorage.setItem(\"movie2\", JSON.stringify(oldData));\r\n        console.log(oldData);\r\n        this.handleFavoritesState();\r\n    }\r\n    handleFavoritesState=()=>{\r\n        let oldData = JSON.parse(localStorage.getItem(\"movie2\")||\"[]\")\r\n        let temp = oldData.map((movie)=>movie.id);\r\n        this.setState({\r\n            favorites:[...temp]\r\n        })\r\n    }\r\n    render() {\r\n        // let movie = movies.results\r\n        // console.log('render');\r\n        return (\r\n            <>\r\n                {\r\n                    this.state.movies.length == 0 ?\r\n                        <div class=\"spinner-border text-primary\" role=\"status\">\r\n                            <span class=\"visually-hidden\">Loading...</span>\r\n                        </div> :\r\n                        <div>\r\n                            <h3 className=\"text-center\" style={{color:'white'}}><strong>Trending</strong></h3>\r\n                            <div className='movies-list'>\r\n                                {\r\n                                    this.state.movies.map((movieObj) => (\r\n                                        <div className=\"card movies-card\" onMouseEnter={() => this.setState({ hover: movieObj.id })} onMouseLeave={() => this.setState({ hover: '' })} >\r\n                                            <img src={`https://image.tmdb.org/t/p/original${movieObj.backdrop_path}`} alt={movieObj.title} className=\"card-img-top movies-img\" />\r\n                                            {/* <div className=\"card-body\"> */}\r\n                                            <h1 className=\"card-title movies-title\">{movieObj.original_title}</h1>\r\n                                            {/* <p className=\"card-text movies-text\">{movieObj.overview}</p> */}\r\n                                            <div className='button-wrapper ' style={{ display: 'flex', width: '100', justifyContent: 'center ' }}>\r\n                                                {\r\n                                                    this.state.hover == movieObj.id &&\r\n                                                    \r\n                                                    <a className=\"btn btn-primary movies-button\" style={{border:'none'}} onClick={()=>this.handleFavorites(movieObj)}>{this.state.favorites.includes(movieObj.id)?\"Remove from favorites\":\"Add to favorites\"}</a>\r\n\r\n                                                }\r\n\r\n\r\n                                            </div>\r\n                                            {/* </div> */}\r\n                                        </div>\r\n                                    ))\r\n                                }\r\n                            </div>\r\n                            <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n                                <nav aria-label=\"Page navigation example\">\r\n                                    <ul class=\"pagination\">\r\n                                        <li class=\"page-item\"><a class=\"page-link\" onClick={this.handleLeft}>Previous</a></li>\r\n                                        {\r\n                                            this.state.parr.map((value) => (\r\n                                                <li class=\"page-item\"><a class=\"page-link\" onClick={() => this.handleClick(value)}>{value}</a></li>\r\n                                            ))\r\n                                        }\r\n                                        <li class=\"page-item\"><a class=\"page-link\" onClick={this.handleRight}>Next</a></li>\r\n                                    </ul>\r\n                                </nav>\r\n                            </div>\r\n                        </div>\r\n\r\n                }\r\n            </>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}